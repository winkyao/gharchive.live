"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[174],{93017:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return H},default:function(){return te},frontMatter:function(){return B},metadata:function(){return $},toc:function(){return K}});var a=n(87462),r=n(63366),i=n(67294),s=n(3905),o=n(488),l=n(15419),u=n(26447),c=n(55113),m=n(61903),d=n(67720),p=n(33841),v=n(23599),f=n(94054),h=n(45018),b=n(88078),y=n(87357),g=n(96129),E=n(82280),x=n(38895),Z=n(22797),w=n(46483),k=n(23508),M=n(71927),C=n(68239),D=n(99490),S=n(5344),T=n(78700),I=n(12859),q=n(85350),F=n(19055),R=n(68413),W=n(55376),j=n(62728),N=n(44008);n(17673);j.kL.register(j.uw,j.f$,j.ZL,j.u,j.De);var G=(0,l.ZP)("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NDQ4OTYyNDMsImV4cCI6MTY0NDk4MjY0M30.2XanIk0exgEmFwsHX0w_w9LWk-X4PaVfPIX235z9JsM",{apiUrl:"https://community-preview-tug.tidb.io/cubejs-api/v1"}),L=D.ou.fromObject({year:2011}),O=D.ou.now(),X=function(e){return i.createElement(m.Z,(0,a.Z)({},e,{helperText:null,variant:"standard"}))},P=[{title:"Stars",value:"WatchEvent"},{title:"Forks",value:"ForkEvent"},{title:"PRs",value:"PullRequestEvent"}],z=[{title:"All",value:"GithubEvents.repoName"},{title:"CN",value:"CnRepos.name"},{title:"Database",value:"DbRepos.name"}];function Q(){var e=function(){var e=(0,i.useMemo)((function(){return Math.random()}),[]),t=(0,i.useMemo)((function(){var e=P[0].value,t=z[0].value,n=L,a=O;if("undefined"!=typeof window){var r=new URLSearchParams(location.search),i=r.get("type"),s=r.get("db"),o=r.get("from");if(i&&P.find((function(e){return e.value===i}))&&(e=i),s&&z.find((function(e){return e.value===s}))&&(t=s),o){var l=D.ou.fromFormat(o,"yyyy").set({month:1,day:1});l.year>=2011&&(n=l)}}return{initialTo:a,initialFrom:n,initialType:e,initialDb:t}}),[]),n=t.initialType,a=t.initialDb,r=t.initialFrom,s=t.initialTo,o=(0,i.useState)(n),l=o[0],c=o[1],m=(0,i.useState)(a),d=m[0],b=m[1],y=(0,i.useState)(r),E=y[0],x=y[1],Z=(0,i.useState)(s),w=Z[0],k=Z[1],M=(0,i.useState)(""),C=M[0],S=M[1],T=(0,i.useState)(void 0),I=T[0],q=T[1],F=(0,i.useMemo)((function(){var e=[],t=[];if(t.push({member:"GithubEvents.eventMonth",operator:"gte",values:[E.toFormat("yyyy-MM-01")]}),t.push({member:"GithubEvents.eventMonth",operator:"lte",values:[w.toFormat("yyyy-MM-01")]}),d?(e.push(""+d),t.push({member:""+d,operator:"set"})):e.push("GithubEvents.repoName"),t.push({member:"GithubEvents.type",operator:"equals",values:[l]}),"undefined"!=typeof window){var n=new window.URLSearchParams;n.set("type",l),n.set("db",d),n.set("from",E.toFormat("yyyy")),window.history.replaceState(null,null,"?"+n.toString())}return{measures:["GithubEvents.count"],timeDimensions:[],order:[["GithubEvents.count","desc"]],limit:10,segments:[],dimensions:e,filters:t}}),[l,d,E,w]),R=(0,i.useMemo)((function(){return{x:[""+d],y:["measures"],fillMissingDates:!0,joinDateRange:!1}}),[d]);(0,i.useEffect)((function(){S(""),q(void 0),G.sql(F).then((function(e){var t=e.rawQuery().sql,n=t[0],a=t[1],r=!0;n=n.replaceAll(/\/\*\s*\+\s*read_from_storage\(tiflash\[[\w,]+]\)\s*\*\//g,(function(e){return r?(r=!1,e):""})),a=a.map((function(e){return"'"+e+"'"})),S((0,N.WU)(n,{language:"mysql",params:a}))})).catch((function(e){S(""),q(e)}))}),[F]);var W=i.createElement(u.Z,{direction:"row",sx:{flexWrap:"wrap",gap:4}},i.createElement(f.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(p.Z,{id:"cubechart-"+e+"-type"},"Type"),i.createElement(h.Z,{id:"cubechart-"+e+"-type",value:l,onChange:function(e){return c(e.target.value)},label:"Type",size:"small"},P.map((function(e){return i.createElement(v.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(f.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(p.Z,{id:"cubechart-"+e+"-db"},"DB"),i.createElement(h.Z,{id:"cubechart-"+e+"-db",value:d,onChange:function(e){return b(e.target.value)},label:"DB",size:"small"},z.map((function(e){return i.createElement(v.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(g.Z,{label:"From",views:["year"],minDate:L,maxDate:O,value:E,onChange:x,renderInput:X,size:"small",sx:{minWidth:"260px",maxWidth:"260px"}}),i.createElement(g.Z,{disabled:!0,label:"To",views:["year"],minDate:L,maxDate:O,value:w,onChange:k,renderInput:X,size:"small",sx:{minWidth:"260px",maxWidth:"260px"}}));return{form:W,query:F,pivotConfig:R,sql:C,sqlErr:I}}(),t=e.form,n=e.query,a=e.pivotConfig,r=e.sql,s=(0,q.Z)().isDarkTheme,l=(0,C.Z)({palette:{mode:s?"dark":void 0,primary:{main:"rgb(37, 193, 159)"}}});return i.createElement(S.Z,{dateAdapter:T.Z},i.createElement(M.Z,{theme:l},i.createElement(I.Z,null,i.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"})),i.createElement(c.Z,{elevation:1,sx:{padding:2}},t,i.createElement(d.Z,{sx:{my:2}}),i.createElement(o.TQ,{loadSql:!1,query:n,cubejsApi:G,render:function(e){return i.createElement(i.Fragment,null,U(r),i.createElement("div",{style:{height:400}},_(Object.assign({},e,{pivotConfig:a}))))}}))))}var U=function(e){var t=void 0;return t=e?i.createElement(F.Z,{className:"language-sql"},e):i.createElement(y.Z,{sx:{pt:.5}},i.createElement(b.Z,{width:"80%"}),i.createElement(b.Z,{width:"50%"}),i.createElement(b.Z,{width:"70%"})),i.createElement(i.Fragment,null,i.createElement(E.Z,{sx:{mb:2}},i.createElement(x.Z,{disabled:!e,expandIcon:i.createElement(k.Z,null)},i.createElement(w.Z,null,"SQL")),i.createElement(Z.Z,null,t)))},A=["rgb(37, 193, 159)","#5b8ff9","#5e7092","#f6bd18","#6f5efa","#6ec8ec","#945fb9","#ff9845","#299796","#fe99c3"],J={maintainAspectRatio:!1,responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top"}},scales:{x:{ticks:{autoSkip:!1,maxRotation:180,padding:0,minRotation:0}}}},Y=function(e){var t=e.resultSet,n=e.pivotConfig,a=(0,R.NY)((function(){return t.series().map((function(e,t){return{label:e.title,data:e.series.map((function(e){return e.value})),yValues:[e.key],backgroundColor:A[t],fill:!1}}))}),[t]),r={labels:t.categories().map((function(e){return e.x})),datasets:a},s=!(n.x||[]).includes("measures"),o=Object.assign({},J,{scales:{x:Object.assign({},J.scales.x,{stacked:s}),y:Object.assign({},J.scales.y,{stacked:s})}});return i.createElement(W.$Q,{height:"400",type:"bar",data:r,options:o})},_=function(e){var t=e.resultSet,n=e.error,a=e.pivotConfig;return n?i.createElement("div",{dangerouslySetInnerHTML:{__html:n.toString()}}):t?i.createElement(Y,{resultSet:t,pivotConfig:a}):i.createElement(b.Z,{variant:"rectangular",height:218})},V=["components"],B={},H=void 0,$={unversionedId:"cube-demo/starts",id:"cube-demo/starts",title:"starts",description:"",source:"@site/docs/cube-demo/starts.mdx",sourceDirName:"cube-demo",slug:"/cube-demo/starts",permalink:"/docs/cube-demo/starts",editUrl:"https://github.com/pingcap-inc/gharchive.live/edit/main/docs/cube-demo/starts.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"step-1",permalink:"/docs/how-it-works/step-1"}},K=[],ee={toc:K};function te(e){var t=e.components,n=(0,r.Z)(e,V);return(0,s.kt)("wrapper",(0,a.Z)({},ee,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)(Q,{mdxType:"CubeChart"}))}te.isMDXComponent=!0}}]);