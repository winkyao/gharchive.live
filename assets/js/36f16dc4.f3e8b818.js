"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[174],{93017:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return H},default:function(){return te},frontMatter:function(){return B},metadata:function(){return $},toc:function(){return K}});var n=a(87462),r=a(63366),i=a(67294),s=a(3905),l=a(488),o=a(15419),u=a(26447),c=a(55113),m=a(61903),d=a(67720),p=a(33841),v=a(23599),f=a(94054),h=a(45018),b=a(88078),y=a(87357),g=a(96129),E=a(82280),x=a(38895),Z=a(22797),w=a(46483),k=a(23508),D=a(71927),M=a(68239),S=a(99490),C=a(5344),T=a(78700),I=a(12859),q=a(85350),F=a(19055),R=a(68413),W=a(55376),j=a(62728),N=a(44008);a(17673);j.kL.register(j.uw,j.f$,j.ZL,j.u,j.De);var O=(0,o.ZP)("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NDQ4OTYyNDMsImV4cCI6MTY0NDk4MjY0M30.2XanIk0exgEmFwsHX0w_w9LWk-X4PaVfPIX235z9JsM",{apiUrl:"https://community-preview-tug.tidb.io/cubejs-api/v1"}),G=S.ou.fromObject({year:2011}),L=S.ou.now(),X=function(e){return i.createElement(m.Z,(0,n.Z)({},e,{helperText:null,variant:"standard"}))},P=[{title:"Stars",value:"WatchEvent"},{title:"Forks",value:"ForkEvent"},{title:"PRs",value:"PullRequestEvent"}],z=[{title:"All",value:"GithubEvents.repoName"},{title:"CN",value:"CnRepos.name"},{title:"Database",value:"DbRepos.name"}];function A(){var e=function(){var e=(0,i.useMemo)((function(){return Math.random()}),[]),t=(0,i.useMemo)((function(){var e=P[0].value,t=z[0].value,a=G,n=L;if("undefined"!=typeof window){var r=new URLSearchParams(location.search),i=r.get("type"),s=r.get("db"),l=r.get("from");if(i&&P.find((function(e){return e.value===i}))&&(e=i),s&&z.find((function(e){return e.value===s}))&&(t=s),l){var o=S.ou.fromFormat(l,"yyyy").set({month:1,day:1});o.year>=2011&&(a=o)}}return{initialTo:n,initialFrom:a,initialType:e,initialDb:t}}),[]),a=t.initialType,n=t.initialDb,r=t.initialFrom,s=t.initialTo,l=(0,i.useState)(a),o=l[0],c=l[1],m=(0,i.useState)(n),d=m[0],b=m[1],y=(0,i.useState)(r),E=y[0],x=y[1],Z=(0,i.useState)(s),w=Z[0],k=Z[1],D=(0,i.useState)(""),M=D[0],C=D[1],T=(0,i.useState)(void 0),I=T[0],q=T[1],F=(0,i.useMemo)((function(){var e=[],t=[];if(t.push({member:"GithubEvents.eventMonth",operator:"gte",values:[E.toFormat("yyyy-MM-01")]}),t.push({member:"GithubEvents.eventMonth",operator:"lte",values:[w.toFormat("yyyy-MM-01")]}),d?(e.push(""+d),t.push({member:""+d,operator:"set"})):e.push("GithubEvents.repoName"),t.push({member:"GithubEvents.type",operator:"equals",values:[o]}),"undefined"!=typeof window){var a=new window.URLSearchParams;a.set("type",o),a.set("db",d),a.set("from",E.toFormat("yyyy")),window.history.replaceState(null,null,"?"+a.toString())}return{measures:["GithubEvents.count"],timeDimensions:[],order:[["GithubEvents.count","desc"]],limit:10,segments:[],dimensions:e,filters:t}}),[o,d,E,w]),R=(0,i.useMemo)((function(){return{x:[""+d],y:["measures"],fillMissingDates:!0,joinDateRange:!1}}),[d]);(0,i.useEffect)((function(){C(""),q(void 0),O.sql(F).then((function(e){var t=e.rawQuery().sql,a=t[0],n=t[1],r=!0;a=a.replaceAll(/\/\*\s*\+\s*read_from_storage\(tiflash\[[\w,]+]\)\s*\*\//g,(function(e){return r?(r=!1,e):""})),n=n.map((function(e){return"'"+e+"'"})),C((0,N.WU)(a,{language:"mysql",params:n}))})).catch((function(e){C(""),q(e)}))}),[F]);var W=i.createElement(u.Z,{direction:"row",sx:{flexWrap:"wrap",gap:4}},i.createElement(f.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(p.Z,{id:"cubechart-"+e+"-type"},"Type"),i.createElement(h.Z,{id:"cubechart-"+e+"-type",value:o,onChange:function(e){return c(e.target.value)},label:"Type",size:"small"},P.map((function(e){return i.createElement(v.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(f.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(p.Z,{id:"cubechart-"+e+"-db"},"DB"),i.createElement(h.Z,{id:"cubechart-"+e+"-db",value:d,onChange:function(e){return b(e.target.value)},label:"DB",size:"small"},z.map((function(e){return i.createElement(v.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(g.Z,{label:"From",views:["year"],minDate:G,maxDate:L,value:E,onChange:x,renderInput:X,size:"small",sx:{minWidth:"260px",maxWidth:"260px"}}),i.createElement(g.Z,{disabled:!0,label:"To",views:["year"],minDate:G,maxDate:L,value:w,onChange:k,renderInput:X,size:"small",sx:{minWidth:"260px",maxWidth:"260px"}}));return{form:W,query:F,pivotConfig:R,sql:M,sqlErr:I}}(),t=e.form,a=e.query,n=e.pivotConfig,r=e.sql,s=(0,q.Z)().isDarkTheme,o=(0,M.Z)({palette:{mode:s?"dark":void 0,primary:{main:"rgb(37, 193, 159)"}}});return i.createElement(C.Z,{dateAdapter:T.Z},i.createElement(D.Z,{theme:o},i.createElement(I.Z,null,i.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"})),i.createElement(c.Z,{elevation:1,sx:{padding:2}},t,i.createElement(d.Z,{sx:{my:2}}),i.createElement(l.TQ,{loadSql:!1,query:a,cubejsApi:O,render:function(e){return i.createElement(i.Fragment,null,Q(r),i.createElement("div",{style:{height:400}},_(Object.assign({},e,{pivotConfig:n}))))}}))))}var Q=function(e){var t=void 0;return t=e?i.createElement(F.Z,{className:"language-sql"},e):i.createElement(y.Z,{sx:{pt:.5}},i.createElement(b.Z,{width:"80%"}),i.createElement(b.Z,{width:"50%"}),i.createElement(b.Z,{width:"70%"})),i.createElement(i.Fragment,null,i.createElement(E.Z,{sx:{mb:2}},i.createElement(x.Z,{disabled:!e,expandIcon:i.createElement(k.Z,null)},i.createElement(w.Z,null,"SQL")),i.createElement(Z.Z,null,t)))},U=["rgb(37, 193, 159)","#5b8ff9","#5e7092","#f6bd18","#6f5efa","#6ec8ec","#945fb9","#ff9845","#299796","#fe99c3"],J={maintainAspectRatio:!1,responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top"}},scales:{x:{ticks:{autoSkip:!1,maxRotation:180,padding:0,minRotation:0}}}},Y=function(e){var t=e.resultSet,a=e.pivotConfig,n=(0,R.NY)((function(){return t.series().map((function(e,t){return{label:e.title,data:e.series.map((function(e){return e.value})),yValues:[e.key],backgroundColor:U[t],fill:!1}}))}),[t]),r={labels:t.categories().map((function(e){return e.x})),datasets:n},s=!(a.x||[]).includes("measures"),l=Object.assign({},J,{scales:{x:Object.assign({},J.scales.x,{stacked:s}),y:Object.assign({},J.scales.y,{stacked:s})}});return i.createElement(W.$Q,{height:"400",type:"bar",data:r,options:l})},_=function(e){var t=e.resultSet,a=e.error,n=e.pivotConfig;return a?i.createElement("div",{dangerouslySetInnerHTML:{__html:a.toString()}}):t?i.createElement(Y,{resultSet:t,pivotConfig:n}):i.createElement(b.Z,{variant:"rectangular",height:218})},V=["components"],B={},H=void 0,$={unversionedId:"cube-demo/starts",id:"cube-demo/starts",title:"starts",description:"",source:"@site/docs/cube-demo/starts.mdx",sourceDirName:"cube-demo",slug:"/cube-demo/starts",permalink:"/docs/cube-demo/starts",editUrl:"https://github.com/pingcap-inc/gharchive.live/edit/main/docs/cube-demo/starts.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"year-2021",permalink:"/docs/cn-repos/year-2021"},next:{title:"OSS Database Analysis: 2021",permalink:"/docs/database/year-2021"}},K=[],ee={toc:K};function te(e){var t=e.components,a=(0,r.Z)(e,V);return(0,s.kt)("wrapper",(0,n.Z)({},ee,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)(A,{mdxType:"CubeChart"}))}te.isMDXComponent=!0}}]);