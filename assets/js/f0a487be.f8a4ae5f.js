"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[433],{407:function(e,t,a){a.d(t,{h:function(){return h}});var n=a(3366),r=a(7294),i=a(7720),l=a(1927),o=a(8239),s=a(5344),c=a(1013),u=a(2859),d=a(5350),m=a(1262),p=["chart","noSearch"];function v(e){var t=e.chart,a=e.noSearch,m=(0,n.Z)(e,p),v=t.useForm({noSearch:a}),h=v.form,f=v.query,y=(0,d.Z)().isDarkTheme,b=(0,o.Z)({palette:{mode:y?"dark":void 0,primary:{main:"rgb(37, 193, 159)"}}}),g=r.createElement(t.Chart,Object.assign({},f,m));return r.createElement(s.Z,{dateAdapter:c.Z},r.createElement(l.Z,{theme:b},r.createElement(u.Z,null,r.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"})),h,r.createElement(i.Z,{sx:{my:2}}),g))}function h(e){return r.createElement(m.Z,null,(function(){return r.createElement(v,e)}))}},7538:function(e,t,a){a.d(t,{z:function(){return I}});var n=a(3366),r=a(7294),i=a(9669),l=a.n(i),o=a(4008),s=a(7357),c=a(6886),u=a(8078),d=a(8032),m=a(5568),p=a(657),v=a(8557),h=a(7608),f=a(5861),y=a(9055),b=a(7155),g=a(4149),E=a(8690),x=a(2739),Z=a(6359),w=a(1416),S=a(9075);function k(e){var t,a,n=e.data,i=e.loading,l=e.clear,o=e.size,s=e.n,c=e.deps,u=e.categoryIndex,d=e.valueIndex,m=(0,r.useMemo)((function(){return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!0,left:0,top:l?0:16,bottom:l?0:16},xAxis:{type:"value",position:"top"},yAxis:{type:"category",data:n.map((function(e){return e[u]})),inverse:!0,axisLabel:{rotate:0,formatter:function(e,t){return e.split("/")[1]}}},series:[{name:"Count",data:n.map((function(e){return e[d]})),type:"bar",barWidth:l?o/2:o,itemStyle:{color:"#ffe39f",borderColor:"#786837",opacity:.7}}]}}),[n].concat(c)),p=i?400:s*(o*(l?1:1.5));return r.createElement(b.Z,{showLoading:i,echarts:S,option:m,notMerge:!0,lazyUpdate:!0,theme:"theme_name",style:{height:p},opts:{devicePixelRatio:null!=(t=null==(a=window)?void 0:a.devicePixelRatio)?t:1,renderer:"canvas",height:p,width:"auto",locale:"en"},onEvents:{click:function(e){"name"in e&&window.open("https://github.com/"+e.name).then()}}})}a(8023).D([E.N,x.N,Z.N,g.N,w.N]);var C=a(9490),T=["clear","size","children"];function I(e,t){var a=t.categoryIndex,i=t.valueIndex;return function(t){var s,c,u=t.clear,d=t.size,p=void 0===d?30:d,v=(t.children,(0,n.Z)(t,T)),h=function(e,t){var a=(0,r.useState)(void 0),n=a[0],i=a[1],s=(0,r.useState)(void 0),c=s[0],u=s[1],d=(0,r.useState)(!1),m=d[0],p=d[1];return(0,r.useEffect)((function(){i(void 0),u(void 0),p(!0),l().get("/q/"+e,{baseURL:"https://community-preview-contributor.tidb.io",params:t}).then((function(e){var t=e.data;t.sql&&(t.sql=(0,o.WU)(t.sql)),i(t)})).catch((function(e){return u(e)})).finally((function(){return p(!1)}))}),[JSON.stringify(t)]),{data:n,loading:m,error:c}}(e,v),f=h.data,y=h.loading,b=h.error,g=r.createElement(k,{categoryIndex:a,valueIndex:i,size:p,data:null!=(s=null==f?void 0:f.data)?s:[],loading:y,clear:u,n:v.n,deps:Object.values(v)});return b?r.createElement(m.Z,{severity:"error"},"Request failed $",null!=(c=null==b?void 0:b.message)?c:""):u?g:r.createElement(r.Fragment,null,r.createElement("div",{style:{position:"relative"}},g,r.createElement(R,{data:f,query:e})),L(null==f?void 0:f.sql))}}var q="yyyy-MM-dd HH:mm:ss",R=function(e){var t=e.query,a=e.data,n=r.useState(!1),i=n[0],l=n[1],o=function(){return l(!1)};return(0,r.useEffect)((function(){a||o()}),[a]),r.createElement(r.Fragment,null,r.createElement(d.Z,{size:"small",sx:{position:"absolute",zIndex:10,right:24,bottom:24},onClick:function(){return l(!0)},disabled:!a},r.createElement(h.Z,null)),r.createElement(p.Z,{open:i,onClose:o,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},r.createElement(v.Z,null,"[For Debug] SQL Execution info"),r.createElement(s.Z,{sx:{p:4}},L(null==a?void 0:a.sql),r.createElement(c.ZP,{container:!0,alignItems:"center"},r.createElement(P,{title:"Requested at",value:C.ou.fromISO(null==a?void 0:a.requestedAt).toFormat(q)}),r.createElement(P,{title:"Expires at",value:C.ou.fromISO(null==a?void 0:a.expiresAt).toFormat(q)}),r.createElement(P,{title:"Spent",value:(null==a?void 0:a.spent)+" seconds"}),r.createElement(P,{title:"Query",value:t}),r.createElement(P,{title:"Params",value:r.createElement("pre",null,JSON.stringify(null==a?void 0:a.params,void 0,2))})))))},P=function(e){var t=e.title,a=e.value;return r.createElement(r.Fragment,null,r.createElement(c.ZP,{xs:3},r.createElement("div",null,r.createElement(f.Z,{align:"right",variant:"body1"},t))),r.createElement(c.ZP,{xs:1}),r.createElement(c.ZP,{xs:8},r.createElement("div",null,r.createElement(f.Z,{align:"left",variant:"body2"},a))))},L=function(e){return e?r.createElement(y.Z,{className:"language-sql"},e):r.createElement(s.Z,{sx:{pt:.5}},r.createElement(u.Z,{width:"80%"}),r.createElement(u.Z,{width:"50%"}),r.createElement(u.Z,{width:"70%"}))}},1095:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return C},default:function(){return R},frontMatter:function(){return k},metadata:function(){return T},toc:function(){return I}});var n=a(7462),r=a(3366),i=a(7294),l=a(3905),o=a(407),s=a(7538),c=(0,s.z)("events-per-year",{categoryIndex:"repo_name",valueIndex:"events_count"}),u=a(6447),d=a(4054),m=a(3841),p=a(3246),v=a(3599),h=a(1903),f=a(7109),y=[{title:"Stars",value:"WatchEvent"},{title:"Forks",value:"ForkEvent"},{title:"PRs",value:"PullRequestEvent"}],b=[10,20,50],g={useForm:function(e){var t=e.noSearch,a=(0,i.useMemo)((function(){return Math.random()}),[]),n=(0,i.useMemo)((function(){var e=y[0].value,a=10;if(!t&&"undefined"!=typeof window){var n=new URLSearchParams(location.search),r=n.get("type"),i=parseInt(n.get("n"));r&&y.find((function(e){return e.value===r}))&&(e=r),i&&b.indexOf(i)>=0&&(a=i)}return{initialType:e,initialLimits:a}}),[]),r=n.initialType,l=n.initialLimits,o=(0,i.useState)(r),s=o[0],c=o[1],g=(0,i.useState)(l),E=g[0],x=g[1],Z=(0,i.useMemo)((function(){if(!t&&"undefined"!=typeof window){var e=new window.URLSearchParams;e.set("type",s),e.set("n",String(E)),window.history.replaceState(null,null,"?"+e.toString())}return{event:s,n:E}}),[s,E]),w=i.createElement(u.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"flex-end",gap:4}},i.createElement(d.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(m.Z,{id:"cubechart-"+a+"-type"},"Type"),i.createElement(p.Z,{id:"cubechart-"+a+"-type",value:s,onChange:function(e){return c(e.target.value)},label:"Type",size:"small"},y.map((function(e){return i.createElement(v.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(d.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(h.Z,{variant:"standard",id:"cubechart-"+a+"-type",select:!0,value:E,onChange:function(e){return x(e.target.value)},InputProps:{startAdornment:i.createElement(f.Z,{position:"start"},"Top")}},b.map((function(e){return i.createElement(v.Z,{key:e,value:e},e)})))));return{form:w,query:Z}},Chart:c},E=(0,s.z)("contributors-per-year",{categoryIndex:"repo_name",valueIndex:"contributors_count"}),x=[{title:"Contributors (PRs opened)",value:"all"},{title:"Contributors (PRs merged)",value:"merged"}],Z=[10,20,50],w={useForm:function(e){var t=e.noSearch,a=(0,i.useMemo)((function(){return Math.random()}),[]),n=(0,i.useMemo)((function(){var e=x[0].value,a=10;if(!t&&"undefined"!=typeof window){var n=new URLSearchParams(location.search),r=n.get("type"),i=parseInt(n.get("n"));r&&x.find((function(e){return e.value===r}))&&(e=r),i&&Z.indexOf(i)>=0&&(a=i)}return{initialType:e,initialLimits:a}}),[]),r=n.initialType,l=n.initialLimits,o=(0,i.useState)(r),s=o[0],c=o[1],y=(0,i.useState)(l),b=y[0],g=y[1],E=(0,i.useMemo)((function(){if(!t&&"undefined"!=typeof window){var e=new window.URLSearchParams;e.set("type",s),e.set("n",String(b)),window.history.replaceState(null,null,"?"+e.toString())}return{action:"all"===s?"opened":"closed",merged:"all"===s?"*":"true",n:b}}),[s,b]),w=i.createElement(u.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"flex-end",gap:4}},i.createElement(d.Z,{variant:"standard",sx:{minWidth:"230px",maxWidth:"230px"}},i.createElement(m.Z,{id:"cubechart-"+a+"-type"},"Type"),i.createElement(p.Z,{id:"cubechart-"+a+"-type",value:s,onChange:function(e){return c(e.target.value)},label:"Type",size:"small"},x.map((function(e){return i.createElement(v.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(d.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(h.Z,{variant:"standard",id:"cubechart-"+a+"-type",select:!0,value:b,onChange:function(e){return g(e.target.value)},InputProps:{startAdornment:i.createElement(f.Z,{position:"start"},"Top")}},Z.map((function(e){return i.createElement(v.Z,{key:e,value:e},e)})))));return{form:w,query:E}},Chart:E},S=["components"],k={title:"OSS Database Analysis: 2021"},C=void 0,T={unversionedId:"database/year-2021",id:"database/year-2021",title:"OSS Database Analysis: 2021",description:"Datasets",source:"@site/docs/database/year-2021.mdx",sourceDirName:"database",slug:"/database/year-2021",permalink:"/docs/database/year-2021",editUrl:"https://github.com/pingcap-inc/gharchive.live/edit/main/docs/database/year-2021.mdx",tags:[],version:"current",frontMatter:{title:"OSS Database Analysis: 2021"},sidebar:"tutorialSidebar",previous:{title:"Realtime - Hourly",permalink:"/docs/database/realtime"},next:{title:"index",permalink:"/docs/js-framework/"}},I=[{value:"Datasets",id:"datasets",children:[],level:2},{value:"Top 10 repos by stars",id:"top-10-repos-by-stars",children:[{value:"SQL query",id:"sql-query",children:[],level:3},{value:"Chart v1",id:"chart-v1",children:[],level:3},{value:"Chart v2",id:"chart-v2",children:[],level:3},{value:"Chart v3",id:"chart-v3",children:[],level:3}],level:2},{value:"Top 10 repos by contributors",id:"top-10-repos-by-contributors",children:[{value:"Chart v3",id:"chart-v3-1",children:[],level:3}],level:2}],q={toc:I};function R(e){var t=e.components,i=(0,r.Z)(e,S);return(0,l.kt)("wrapper",(0,n.Z)({},q,i,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("img",{src:a(2655).Z})),(0,l.kt)("h2",{id:"datasets"},"Datasets"),(0,l.kt)("p",null,"We have collected a list of well-known open source projects in the field of database and big data, mainly including: TiDB, Elasticsearch, Clickhouse, Redis, etc. If the repo you care about is not on the list, you can submit a ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/hooopo/gharchive/blob/main/meta/repos/db_repos.yml"},"pull request")," to improve it."),(0,l.kt)("p",null,"The full list of database repositories participating in statistics includes"),(0,l.kt)("iframe",{src:"https://chart.trytidb.com/chart/729b8abe-11e3-4ca8-bf46-d65e76c95ac0/embedded",allowTransparency:"true",width:"100%",height:"660",scrolling:"no",frameborder:"0"}),(0,l.kt)("h2",{id:"top-10-repos-by-stars"},"Top 10 repos by stars"),(0,l.kt)("h3",{id:"sql-query"},"SQL query"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT \n  db_repos.name AS repo_name,\n  COUNT(*) AS num\nFROM github_events \nJOIN db_repos ON db_repos.id = github_events.repo_id\nWHERE type = 'WatchEvent' AND event_year = 2021\nGROUP BY db_repos.name\nORDER BY 2 desc\nLIMIT 10\n")),(0,l.kt)("h3",{id:"chart-v1"},"Chart v1"),(0,l.kt)("p",null,(0,l.kt)("img",{src:a(8654).Z})),(0,l.kt)("h3",{id:"chart-v2"},"Chart v2"),(0,l.kt)("iframe",{src:"https://chart.trytidb.com/chart/c93742ce-cc36-450d-b0a1-e8430669b050/embedded",allowTransparency:"true",width:"100%",height:"500",scrolling:"no",frameborder:"0"}),(0,l.kt)("h3",{id:"chart-v3"},"Chart v3"),(0,l.kt)(o.h,{repo:"db_repos",year:2021,chart:g,noSearch:!0,mdxType:"CommonChart"}),(0,l.kt)("h2",{id:"top-10-repos-by-contributors"},"Top 10 repos by contributors"),(0,l.kt)("h3",{id:"chart-v3-1"},"Chart v3"),(0,l.kt)(o.h,{repo:"db_repos",year:2021,chart:w,noSearch:!0,mdxType:"CommonChart"}))}R.isMDXComponent=!0},2655:function(e,t,a){t.Z=a.p+"assets/images/gharchive-title-img-en-5da625bc9dbe87455c5b1f7e78f0f9e8.png"},8654:function(e,t,a){t.Z=a.p+"assets/images/report-demo-26683fe2b650441b628aceb73a7eba5a.png"}}]);