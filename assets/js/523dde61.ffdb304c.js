"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[105],{407:function(e,t,r){r.d(t,{h:function(){return p}});var n=r(3366),a=r(7294),i=r(7720),o=r(1927),s=r(8239),l=r(5344),u=r(1013),c=r(2859),m=r(5350),d=["useForm","children"];function p(e){var t=e.useForm,r=e.children,p=(0,n.Z)(e,d),f=t(),h=f.form,v=f.query,y=(0,m.Z)().isDarkTheme,w=(0,s.Z)({palette:{mode:y?"dark":void 0,primary:{main:"rgb(37, 193, 159)"}}}),E=a.cloneElement(r,Object.assign({},v,p));return a.createElement(l.Z,{dateAdapter:u.Z},a.createElement(o.Z,{theme:w},a.createElement(c.Z,null,a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"})),h,a.createElement(i.Z,{sx:{my:2}}),E))}},8453:function(e,t,r){r.d(t,{k:function(){return E},c:function(){return W}});var n=r(9669),a=r.n(n),i=r(7294),o=r(4008),s=r(7155),l=r(9075),u=r(8023),c=r(4149),m=r(8690),d=r(2739),p=r(6359),f=r(1416),h=r(5568),v=r(8078),y=r(7357),w=r(9055);function E(e){var t,r=e.repo,n=e.event,u=e.n,c=e.years,m=function(e,t){var r=(0,i.useState)(void 0),n=r[0],s=r[1],l=(0,i.useState)(void 0),u=l[0],c=l[1];return(0,i.useEffect)((function(){s(void 0),c(void 0),a().get("/q/"+e,{baseURL:"https://community-preview-contributor.tidb.io",params:t}).then((function(e){var t=e.data;t.sql&&(t.sql=(0,o.WU)(t.sql)),s(t)})).catch((function(e){return c(e)}))}),[JSON.stringify(t)]),{data:n,error:u}}("events-history",{repo:r,event:n,n:u,years:c}),d=m.data,p=m.error,f=(0,i.useMemo)((function(){if(d)return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!0,left:0},xAxis:{type:"value",position:"top"},yAxis:{type:"category",data:d.data.map((function(e){return e.repo_name})),inverse:!0,axisLabel:{rotate:0}},series:[{name:"Count",data:d.data.map((function(e){return e.events_count})),type:"bar",barWidth:30,itemStyle:{color:"#ffe39f",borderColor:"#786837",opacity:.7}}]}}),[d,r,n,u,c]);if(d){var w,E,g=50*u;return i.createElement(i.Fragment,null,i.createElement(s.Z,{echarts:l,option:f,notMerge:!0,lazyUpdate:!0,theme:"theme_name",style:{height:g},opts:{devicePixelRatio:null!=(w=null==(E=window)?void 0:E.devicePixelRatio)?w:1,renderer:"canvas",height:"auto",width:"auto",locale:"en"}}),Z(d.sql))}return p?i.createElement(h.Z,{severity:"error"},"Request failed $",null!=(t=null==p?void 0:p.message)?t:""):i.createElement(y.Z,{sx:{p:8}},i.createElement(v.Z,{width:"80%"}),i.createElement(v.Z,{width:"70%"}),i.createElement(v.Z,{width:"50%"}),i.createElement(v.Z,{width:"45%"}),i.createElement(v.Z,{width:"25%"}),i.createElement(v.Z,{width:"10%"}))}u.D([m.N,d.N,p.N,c.N,f.N]);var Z=function(e){return e?i.createElement(w.Z,{className:"language-sql"},e):i.createElement(y.Z,{sx:{pt:.5}},i.createElement(v.Z,{width:"80%"}),i.createElement(v.Z,{width:"50%"}),i.createElement(v.Z,{width:"70%"}))},g=r(6447),x=r(913),b=r(3841),k=r(9448),S=r(3599),C=r(5449),R=r(4722),q=[{title:"Stars",value:"WatchEvent"},{title:"Forks",value:"ForkEvent"},{title:"PRs",value:"PullRequestEvent"}],M=[1,2,5,10],T=[10,20,50],W=function(){var e=(0,i.useMemo)((function(){return Math.random()}),[]),t=(0,i.useMemo)((function(){var e=q[0].value,t=1,r=10;if("undefined"!=typeof window){var n=new URLSearchParams(location.search),a=n.get("type"),i=parseInt(n.get("years")),o=parseInt(n.get("n"));a&&q.find((function(e){return e.value===a}))&&(e=a),i&&M.indexOf(i)>=0&&(t=i),o&&T.indexOf(o)>=0&&(r=o)}return{initialType:e,initialYears:t,initialLimits:r}}),[]),r=t.initialType,n=t.initialLimits,a=t.initialYears,o=(0,i.useState)(r),s=o[0],l=o[1],u=(0,i.useState)(n),c=u[0],m=u[1],d=(0,i.useState)(a),p=d[0],f=d[1],h=(0,i.useMemo)((function(){if("undefined"!=typeof window){var e=new window.URLSearchParams;e.set("type",s),e.set("n",String(c)),e.set("years",String(p)),window.history.replaceState(null,null,"?"+e.toString())}return{event:s,n:c,years:p}}),[s,c,p]),v=i.createElement(g.Z,{direction:"row",sx:{flexWrap:"wrap",gap:4}},i.createElement(x.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(b.Z,{id:"cubechart-"+e+"-type"},"Type"),i.createElement(k.Z,{id:"cubechart-"+e+"-type",value:s,onChange:function(e){return l(e.target.value)},label:"Type",size:"small"},q.map((function(e){return i.createElement(S.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(x.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(C.Z,{id:"cubechart-"+e+"-type",select:!0,value:c,onChange:function(e){return m(e.target.value)},size:"small",InputProps:{startAdornment:i.createElement(R.Z,{position:"start"},"Top")}},T.map((function(e){return i.createElement(S.Z,{key:e,value:e},e)})))),i.createElement(x.Z,{variant:"standard",sx:{minWidth:"240px",maxWidth:"240px"}},i.createElement(C.Z,{id:"cubechart-"+e+"-type",value:p,onChange:function(e){return f(e.target.value)},size:"small",select:!0,InputProps:{startAdornment:i.createElement(R.Z,{position:"start"},"Recent"),endAdornment:i.createElement(R.Z,{position:"start"},"Year(s)\xa0")}},M.map((function(e){return i.createElement(S.Z,{key:e,value:e},e)})))));return{form:v,query:h}}},8305:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return u},contentTitle:function(){return c},metadata:function(){return m},toc:function(){return d},default:function(){return f}});var n=r(7462),a=r(3366),i=(r(7294),r(3905)),o=r(407),s=r(8453),l=["components"],u={title:"History"},c=void 0,m={unversionedId:"web-framework/history",id:"web-framework/history",title:"History",description:"",source:"@site/docs/web-framework/history.mdx",sourceDirName:"web-framework",slug:"/web-framework/history",permalink:"/docs/web-framework/history",editUrl:"https://github.com/pingcap-inc/gharchive.live/edit/main/docs/web-framework/history.mdx",tags:[],version:"current",frontMatter:{title:"History"},sidebar:"tutorialSidebar",previous:{title:"index",permalink:"/docs/web-framework/"},next:{title:"Realtime - Hourly",permalink:"/docs/web-framework/realtime"}},d=[],p={toc:d};function f(e){var t=e.components,r=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)(o.h,{repo:"web_framework_repos",useForm:s.c,mdxType:"CommonChart"},(0,i.kt)(s.k,{mdxType:"Chart"})))}f.isMDXComponent=!0}}]);