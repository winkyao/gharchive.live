(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[477],{407:function(e,t,n){"use strict";n.d(t,{h:function(){return f}});var r=n(3366),a=n(7294),i=n(7720),o=n(1927),l=n(8239),u=n(5344),s=n(1013),c=n(2859),d=n(5350),m=n(1262),v=["chart","noSearch"];function p(e){var t=e.chart,m=e.noSearch,p=(0,r.Z)(e,v),f=(0,d.Z)().isDarkTheme,y=(0,l.Z)({palette:{mode:f?"dark":void 0,primary:{main:"rgb(37, 193, 159)"}}}),h=(0,a.useMemo)((function(){return"string"==typeof t?n(5898)("./"+t+"/index.js").default:t}),[t]),g=h.useForm({noSearch:m}),E=g.form,x=g.query,b=a.createElement(h.Chart,Object.assign({},x,p));return a.createElement(u.Z,{dateAdapter:s.Z},a.createElement(o.Z,{theme:y},a.createElement(c.Z,null,a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"})),E,a.createElement(i.Z,{sx:{my:2}}),b))}function f(e){return a.createElement(m.Z,null,(function(){return a.createElement(p,e)}))}},4647:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=(0,n(7538).z)("contributors-per-year",{categoryIndex:"repo_name",valueIndex:"contributors_count"}),a=n(7294),i=n(6447),o=n(4054),l=n(3841),u=n(3246),s=n(3599),c=n(1903),d=n(7109),m=[{title:"Contributors (PRs opened)",value:"all"},{title:"Contributors (PRs merged)",value:"merged"}],v=[10,20,50],p={useForm:function(e){var t=e.noSearch,n=(0,a.useMemo)((function(){return Math.random()}),[]),r=(0,a.useMemo)((function(){var e=m[0].value,n=10;if(!t&&"undefined"!=typeof window){var r=new URLSearchParams(location.search),a=r.get("type"),i=parseInt(r.get("n"));a&&m.find((function(e){return e.value===a}))&&(e=a),i&&v.indexOf(i)>=0&&(n=i)}return{initialType:e,initialLimits:n}}),[]),p=r.initialType,f=r.initialLimits,y=(0,a.useState)(p),h=y[0],g=y[1],E=(0,a.useState)(f),x=E[0],b=E[1],Z=(0,a.useMemo)((function(){if(!t&&"undefined"!=typeof window){var e=new window.URLSearchParams;e.set("type",h),e.set("n",String(x)),window.history.replaceState(null,null,"?"+e.toString())}return{action:"all"===h?"opened":"closed",merged:"all"===h?"*":"true",n:x}}),[h,x]),w=a.createElement(i.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"flex-end",gap:4}},a.createElement(o.Z,{variant:"standard",sx:{minWidth:"230px",maxWidth:"230px"}},a.createElement(l.Z,{id:"cubechart-"+n+"-type"},"Type"),a.createElement(u.Z,{id:"cubechart-"+n+"-type",value:h,onChange:function(e){return g(e.target.value)},label:"Type",size:"small"},m.map((function(e){return a.createElement(s.Z,{key:e.value,value:e.value},e.title)})))),a.createElement(o.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},a.createElement(c.Z,{variant:"standard",id:"cubechart-"+n+"-type",select:!0,value:x,onChange:function(e){return b(e.target.value)},InputProps:{startAdornment:a.createElement(d.Z,{position:"start"},"Top")}},v.map((function(e){return a.createElement(s.Z,{key:e,value:e},e)})))));return{form:w,query:Z}},Chart:r}},3714:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=(0,n(7538).z)("events-per-year",{categoryIndex:"repo_name",valueIndex:"events_count"}),a=n(7294),i=n(6447),o=n(4054),l=n(3841),u=n(3246),s=n(3599),c=n(1903),d=n(7109),m=[{title:"Stars",value:"WatchEvent"},{title:"Forks",value:"ForkEvent"},{title:"PRs",value:"PullRequestEvent"}],v=[10,20,50],p={useForm:function(e){var t=e.noSearch,n=(0,a.useMemo)((function(){return Math.random()}),[]),r=(0,a.useMemo)((function(){var e=m[0].value,n=10;if(!t&&"undefined"!=typeof window){var r=new URLSearchParams(location.search),a=r.get("type"),i=parseInt(r.get("n"));a&&m.find((function(e){return e.value===a}))&&(e=a),i&&v.indexOf(i)>=0&&(n=i)}return{initialType:e,initialLimits:n}}),[]),p=r.initialType,f=r.initialLimits,y=(0,a.useState)(p),h=y[0],g=y[1],E=(0,a.useState)(f),x=E[0],b=E[1],Z=(0,a.useMemo)((function(){if(!t&&"undefined"!=typeof window){var e=new window.URLSearchParams;e.set("type",h),e.set("n",String(x)),window.history.replaceState(null,null,"?"+e.toString())}return{event:h,n:x}}),[h,x]),w=a.createElement(i.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"flex-end",gap:4}},a.createElement(o.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},a.createElement(l.Z,{id:"cubechart-"+n+"-type"},"Type"),a.createElement(u.Z,{id:"cubechart-"+n+"-type",value:h,onChange:function(e){return g(e.target.value)},label:"Type",size:"small"},m.map((function(e){return a.createElement(s.Z,{key:e.value,value:e.value},e.title)})))),a.createElement(o.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},a.createElement(c.Z,{variant:"standard",id:"cubechart-"+n+"-type",select:!0,value:x,onChange:function(e){return b(e.target.value)},InputProps:{startAdornment:a.createElement(d.Z,{position:"start"},"Top")}},v.map((function(e){return a.createElement(s.Z,{key:e,value:e},e)})))));return{form:w,query:Z}},Chart:r}},7065:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(3366),a=n(7538),i=n(7294),o=["category","valueIndex"],l=((0,a.z)("events-history",{categoryIndex:"repo_name",valueIndex:"events_count"}),n(6447)),u=n(4054),s=n(3841),c=n(3246),d=n(3599),m=n(1903),v=n(7109),p=[{title:"Stars",key:"stars",value:{category:"events-history",params:{event:"WatchEvent"},valueIndex:"events_count"}},{title:"Forks",key:"forks",value:{category:"events-history",params:{event:"ForkEvent"},valueIndex:"events_count"}},{title:"PRs",key:"PRs",value:{category:"events-history",params:{event:"PullRequestEvent"},valueIndex:"events_count"}},{title:"Contributors (PRs opened)",key:"contributors-PR-opened",value:{category:"contributors-history",params:{action:"opened",merged:"*"},valueIndex:"contributors_count"}},{title:"Contributors (PRs merged)",key:"contributors-PR-merged",value:{category:"contributors-history",params:{action:"closed",merged:"true"},valueIndex:"contributors_count"}}],f=[1,2,5,10],y=[10,20,50],h={useForm:function(e){var t=e.noSearch,n=(0,i.useMemo)((function(){return Math.random()}),[]),r=(0,i.useMemo)((function(){var e=p[0],n=1,r=10;if(!t&&"undefined"!=typeof window){var a=new URLSearchParams(location.search),i=a.get("type"),o=parseInt(a.get("years")),l=parseInt(a.get("n"));if(i){var u=p.find((function(e){return e.key===i}));u&&(e=u)}o&&f.indexOf(o)>=0&&(n=o),l&&y.indexOf(l)>=0&&(r=l)}return{initialType:e,initialYears:n,initialLimits:r}}),[]),a=r.initialType,o=r.initialLimits,h=r.initialYears,g=(0,i.useState)(a),E=g[0],x=g[1],b=(0,i.useState)(o),Z=b[0],w=b[1],S=(0,i.useState)(h),I=S[0],k=S[1],P=(0,i.useMemo)((function(){if(!t&&"undefined"!=typeof window){var e=new window.URLSearchParams;e.set("type",E.key),e.set("n",String(Z)),e.set("years",String(I)),window.history.replaceState(null,null,"?"+e.toString())}return Object.assign({category:E.value.category,valueIndex:E.value.valueIndex},E.value.params,{n:Z,years:I})}),[E,Z,I]),C=i.createElement(l.Z,{direction:"row",sx:{flexWrap:"wrap",alignItems:"flex-end",gap:4}},i.createElement(u.Z,{variant:"standard"},i.createElement(s.Z,{id:n+"-type"},"Type"),i.createElement(c.Z,{id:n+"-type",value:E,autoWidth:!0,onChange:function(e){var t;return x(null!=(t=p.find((function(t){return t.key===e.target.value})))?t:p[0])},label:"Type",size:"small",renderValue:function(e){return e.title}},p.map((function(e){return i.createElement(d.Z,{key:e.key,value:e.key},e.title)})))),i.createElement(u.Z,{variant:"standard"},i.createElement(m.Z,{variant:"standard",select:!0,value:Z,onChange:function(e){return w(Number(e.target.value))},InputProps:{startAdornment:i.createElement(v.Z,{position:"start"},"Top")}},y.map((function(e){return i.createElement(d.Z,{key:e,value:e},e)})))),i.createElement(u.Z,{variant:"standard"},i.createElement(m.Z,{variant:"standard",value:I,onChange:function(e){return k(Number(e.target.value))},select:!0,InputProps:{startAdornment:i.createElement(v.Z,{position:"start"},"Recent"),endAdornment:i.createElement(v.Z,{position:"start",sx:{mr:4}},"Year(s)")}},f.map((function(e){return i.createElement(d.Z,{key:e,value:e},e)})))));return{form:C,query:P}},Chart:function(e){var t=e.category,n=e.valueIndex,l=(0,r.Z)(e,o),u=(0,i.useMemo)((function(){return(0,a.z)(t,{categoryIndex:"repo_name",valueIndex:n})}),[t,n]);return i.createElement(u,l)}}},7538:function(e,t,n){"use strict";n.d(t,{z:function(){return C}});var r=n(3366),a=n(7294),i=n(9669),o=n.n(i),l=n(4008),u=n(7357),s=n(6886),c=n(8078),d=n(8032),m=n(5568),v=n(657),p=n(8557),f=n(7608),y=n(5861),h=n(9055),g=n(7155),E=n(4149),x=n(8690),b=n(2739),Z=n(6359),w=n(1416),S=n(9075);function I(e){var t,n,r=e.data,i=e.loading,o=e.clear,l=e.size,u=e.n,s=e.deps,c=e.categoryIndex,d=e.valueIndex,m=(0,a.useMemo)((function(){return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!0,left:0,top:o?0:16,bottom:o?0:16},xAxis:{type:"value",position:"top"},yAxis:{type:"category",data:r.map((function(e){return e[c]})),inverse:!0,axisLabel:{rotate:0,formatter:function(e,t){return e.split("/")[1]}}},series:[{name:"Count",data:r.map((function(e){return e[d]})),type:"bar",barWidth:o?l/2:l,itemStyle:{color:"#ffe39f",borderColor:"#786837",opacity:.7}}]}}),[r].concat(s)),v=i?400:u*(l*(o?1:1.5));return a.createElement(g.Z,{showLoading:i,echarts:S,option:m,notMerge:!0,lazyUpdate:!0,theme:"theme_name",style:{height:v},opts:{devicePixelRatio:null!=(t=null==(n=window)?void 0:n.devicePixelRatio)?t:1,renderer:"canvas",height:v,width:"auto",locale:"en"},onEvents:{click:function(e){"name"in e&&window.open("https://github.com/"+e.name).then()}}})}n(8023).D([x.N,b.N,Z.N,E.N,w.N]);var k=n(9490),P=["clear","size","children"];function C(e,t){var n=t.categoryIndex,i=t.valueIndex;return function(t){var u,s,c=t.clear,d=t.size,v=void 0===d?30:d,p=(t.children,(0,r.Z)(t,P)),f=function(e,t){var n=(0,a.useState)(void 0),r=n[0],i=n[1],u=(0,a.useState)(void 0),s=u[0],c=u[1],d=(0,a.useState)(!1),m=d[0],v=d[1];return(0,a.useEffect)((function(){i(void 0),c(void 0),v(!0),o().get("/q/"+e,{baseURL:"https://community-preview-contributor.tidb.io",params:t}).then((function(e){var t=e.data;t.sql&&(t.sql=(0,l.WU)(t.sql)),i(t)})).catch((function(e){return c(e)})).finally((function(){return v(!1)}))}),[JSON.stringify(t)]),{data:r,loading:m,error:s}}(e,p),y=f.data,h=f.loading,g=f.error,E=a.createElement(I,{categoryIndex:n,valueIndex:i,size:v,data:null!=(u=null==y?void 0:y.data)?u:[],loading:h,clear:c,n:p.n,deps:Object.values(p)});return g?a.createElement(m.Z,{severity:"error"},"Request failed $",null!=(s=null==g?void 0:g.message)?s:""):c?E:a.createElement(a.Fragment,null,a.createElement("div",{style:{position:"relative"}},E,a.createElement(M,{data:y,query:e})),L(null==y?void 0:y.sql))}}var R="yyyy-MM-dd HH:mm:ss",M=function(e){var t=e.query,n=e.data,r=a.useState(!1),i=r[0],o=r[1],l=function(){return o(!1)};return(0,a.useEffect)((function(){n||l()}),[n]),a.createElement(a.Fragment,null,a.createElement(d.Z,{size:"small",sx:{position:"absolute",zIndex:10,right:24,bottom:24},onClick:function(){return o(!0)},disabled:!n},a.createElement(f.Z,null)),a.createElement(v.Z,{open:i,onClose:l,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},a.createElement(p.Z,null,"[For Debug] SQL Execution info"),a.createElement(u.Z,{sx:{p:4}},L(null==n?void 0:n.sql),a.createElement(s.ZP,{container:!0,alignItems:"center"},a.createElement(T,{title:"Requested at",value:k.ou.fromISO(null==n?void 0:n.requestedAt).toFormat(R)}),a.createElement(T,{title:"Expires at",value:k.ou.fromISO(null==n?void 0:n.expiresAt).toFormat(R)}),a.createElement(T,{title:"Spent",value:(null==n?void 0:n.spent)+" seconds"}),a.createElement(T,{title:"Query",value:t}),a.createElement(T,{title:"Params",value:a.createElement("pre",null,JSON.stringify(null==n?void 0:n.params,void 0,2))})))))},T=function(e){var t=e.title,n=e.value;return a.createElement(a.Fragment,null,a.createElement(s.ZP,{xs:3},a.createElement("div",null,a.createElement(y.Z,{align:"right",variant:"body1"},t))),a.createElement(s.ZP,{xs:1}),a.createElement(s.ZP,{xs:8},a.createElement("div",null,a.createElement(y.Z,{align:"left",variant:"body2"},n))))},L=function(e){return e?a.createElement(h.Z,{className:"language-sql"},e):a.createElement(u.Z,{sx:{pt:.5}},a.createElement(c.Z,{width:"80%"}),a.createElement(c.Z,{width:"50%"}),a.createElement(c.Z,{width:"70%"}))}},6600:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return v}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=n(407),l=["components"],u={title:"History"},s=void 0,c={unversionedId:"database/history",id:"database/history",title:"History",description:"",source:"@site/docs/database/history.mdx",sourceDirName:"database",slug:"/database/history",permalink:"/_/database/history",editUrl:"https://github.com/pingcap-inc/gharchive.live/edit/main/docs/database/history.mdx",tags:[],version:"current",frontMatter:{title:"History"},sidebar:"tutorialSidebar",previous:{title:"OSS Database Analysis: 2021",permalink:"/_/database/"},next:{title:"Realtime - Hourly",permalink:"/_/database/realtime"}},d=[],m={toc:d};function v(e){var t=e.components,n=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)(o.h,{repo:"db_repos",chart:"histories",mdxType:"CommonChart"}))}v.isMDXComponent=!0},5898:function(e,t,n){var r={"./contributors-per-year/index.js":4647,"./events-per-year/index.js":3714,"./histories/index.js":7065};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=5898}}]);