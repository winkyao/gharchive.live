"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[174],{93017:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return H},default:function(){return te},frontMatter:function(){return B},metadata:function(){return $},toc:function(){return K}});var n=a(87462),r=a(63366),i=a(67294),s=a(3905),l=a(488),u=a(15419),o=a(26447),c=a(55113),m=a(61903),d=a(67720),p=a(33841),v=a(23599),f=a(94054),h=a(45018),b=a(88078),g=a(87357),E=a(96129),y=a(82280),x=a(38895),Z=a(22797),k=a(46483),C=a(23508),M=a(71927),D=a(68239),w=a(99490),S=a(5344),I=a(78700),q=a(12859),T=a(85350),W=a(19055),j=a(68413),N=a(55376),R=a(62728),O=a(44008);R.kL.register(R.uw,R.f$,R.ZL,R.u,R.De);var F=(0,u.ZP)("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NDQ4OTYyNDMsImV4cCI6MTY0NDk4MjY0M30.2XanIk0exgEmFwsHX0w_w9LWk-X4PaVfPIX235z9JsM",{apiUrl:"https://community-preview-tug.tidb.io/cubejs-api/v1"}),G=w.ou.fromObject({year:2011}),X=w.ou.now(),z=function(e){return i.createElement(m.Z,(0,n.Z)({},e,{helperText:null,variant:"standard"}))},L=[{title:"Stars",value:"WatchEvent"},{title:"Forks",value:"ForkEvent"},{title:"PRs",value:"PullRequestEvent"}],Q=[{title:"All",value:"GithubEvents.repoName"},{title:"CN",value:"CnRepos.name"},{title:"Database",value:"DbRepos.name"}];function A(){var e=function(){var e=(0,i.useMemo)((function(){return Math.random()}),[]),t=(0,i.useState)(L[0].value),a=t[0],n=t[1],r=(0,i.useState)(Q[0].value),s=r[0],l=r[1],u=(0,i.useState)(G),c=u[0],m=u[1],d=(0,i.useState)(X),b=d[0],g=d[1],y=(0,i.useState)(""),x=y[0],Z=y[1],k=(0,i.useState)(void 0),C=k[0],M=k[1],D=(0,i.useMemo)((function(){var e=[],t=[];return t.push({member:"GithubEvents.eventMonth",operator:"gte",values:[c.toFormat("yyyy-MM-01")]}),t.push({member:"GithubEvents.eventMonth",operator:"lte",values:[b.toFormat("yyyy-MM-01")]}),s?(e.push(""+s),t.push({member:""+s,operator:"set"})):e.push("GithubEvents.repoName"),t.push({member:"GithubEvents.type",operator:"equals",values:[a]}),{measures:["GithubEvents.count"],timeDimensions:[],order:[["GithubEvents.count","desc"]],limit:10,segments:[],dimensions:e,filters:t}}),[a,s,c,b]),w=(0,i.useMemo)((function(){return{x:[""+s],y:["measures"],fillMissingDates:!0,joinDateRange:!1}}),[s]);(0,i.useEffect)((function(){Z(""),M(void 0),F.sql(D).then((function(e){var t=e.rawQuery().sql,a=t[0],n=t[1];Z((0,O.WU)(a,{language:"mysql",params:n.map((function(e){return"'"+e+"'"}))}))})).catch((function(e){Z(""),M(e)}))}),[D]);var S=i.createElement(o.Z,{direction:"row",sx:{flexWrap:"wrap",gap:4}},i.createElement(f.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(p.Z,{id:"cubechart-"+e+"-type"},"Type"),i.createElement(h.Z,{id:"cubechart-"+e+"-type",value:a,onChange:function(e){return n(e.target.value)},label:"Type",size:"small"},L.map((function(e){return i.createElement(v.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(f.Z,{variant:"standard",sx:{minWidth:"120px",maxWidth:"120px"}},i.createElement(p.Z,{id:"cubechart-"+e+"-db"},"DB"),i.createElement(h.Z,{id:"cubechart-"+e+"-db",value:s,onChange:function(e){return l(e.target.value)},label:"DB",size:"small"},Q.map((function(e){return i.createElement(v.Z,{key:e.value,value:e.value},e.title)})))),i.createElement(E.Z,{label:"From year",views:["year","month"],minDate:G,maxDate:X,value:c,onChange:m,renderInput:z,size:"small",sx:{minWidth:"260px",maxWidth:"260px"}}),i.createElement(E.Z,{label:"To year",views:["year","month"],minDate:G,maxDate:X,value:b,onChange:g,renderInput:z,size:"small",sx:{minWidth:"260px",maxWidth:"260px"}}));return{form:S,query:D,pivotConfig:w,sql:x,sqlErr:C}}(),t=e.form,a=e.query,n=e.pivotConfig,r=e.sql,s=(0,T.Z)().isDarkTheme,u=(0,D.Z)({palette:{mode:s?"dark":void 0,primary:{main:"rgb(37, 193, 159)"}}});return i.createElement(S.Z,{dateAdapter:I.Z},i.createElement(M.Z,{theme:u},i.createElement(q.Z,null,i.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"})),i.createElement(c.Z,{elevation:1,sx:{padding:2}},t,i.createElement(d.Z,{sx:{my:2}}),i.createElement(l.TQ,{loadSql:!1,query:a,cubejsApi:F,render:function(e){return i.createElement(i.Fragment,null,J(r),i.createElement("div",{style:{height:400}},V(Object.assign({},e,{pivotConfig:n}))))}}))))}var J=function(e){var t=void 0;return t=e?i.createElement(W.Z,{className:"language-sql"},e):i.createElement(g.Z,{sx:{pt:.5}},i.createElement(b.Z,{width:"80%"}),i.createElement(b.Z,{width:"50%"}),i.createElement(b.Z,{width:"70%"})),i.createElement(i.Fragment,null,i.createElement(y.Z,{sx:{mb:2}},i.createElement(x.Z,{disabled:!e,expandIcon:i.createElement(C.Z,null)},i.createElement(k.Z,null,"SQL")),i.createElement(Z.Z,null,t)))},P=["rgb(37, 193, 159)","#5b8ff9","#5e7092","#f6bd18","#6f5efa","#6ec8ec","#945fb9","#ff9845","#299796","#fe99c3"],Y={maintainAspectRatio:!1,responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top"}},scales:{x:{ticks:{autoSkip:!1,maxRotation:180,padding:0,minRotation:0}}}},U=function(e){var t=e.resultSet,a=e.pivotConfig,n=(0,j.NY)((function(){return t.series().map((function(e,t){return{label:e.title,data:e.series.map((function(e){return e.value})),yValues:[e.key],backgroundColor:P[t],fill:!1}}))}),[t]),r={labels:t.categories().map((function(e){return e.x})),datasets:n},s=!(a.x||[]).includes("measures"),l=Object.assign({},Y,{scales:{x:Object.assign({},Y.scales.x,{stacked:s}),y:Object.assign({},Y.scales.y,{stacked:s})}});return i.createElement(N.$Q,{height:"400",type:"bar",data:r,options:l})},V=function(e){var t=e.resultSet,a=e.error,n=e.pivotConfig;return a?i.createElement("div",{dangerouslySetInnerHTML:{__html:a.toString()}}):t?i.createElement(U,{resultSet:t,pivotConfig:n}):i.createElement(b.Z,{variant:"rectangular",height:218})},_=["components"],B={},H=void 0,$={unversionedId:"cube-demo/starts",id:"cube-demo/starts",title:"starts",description:"",source:"@site/docs/cube-demo/starts.mdx",sourceDirName:"cube-demo",slug:"/cube-demo/starts",permalink:"/docs/cube-demo/starts",editUrl:"https://github.com/pingcap-inc/gharchive.live/edit/main/docs/cube-demo/starts.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"year-2021",permalink:"/docs/cn-repos/year-2021"},next:{title:"OSS Database Analysis: 2021",permalink:"/docs/database/year-2021"}},K=[],ee={toc:K};function te(e){var t=e.components,a=(0,r.Z)(e,_);return(0,s.kt)("wrapper",(0,n.Z)({},ee,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)(A,{mdxType:"CubeChart"}))}te.isMDXComponent=!0}}]);